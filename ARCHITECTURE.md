# ìŠ¤í‹°ì»¤ ê°€ë“œ ì•± - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ

## ğŸ“‹ ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025.11.02
- **ë²„ì „**: 1.0
- **í”„ë¡œì íŠ¸**: Sticker Guard iOS App
- **íšŒì‚¬ ìœ„ì¹˜**: 37.2253811, 127.0706423 (300m ë°˜ê²½)

---

## ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      iOS ì•± (React Native)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Presentation â”‚  â”‚   Business    â”‚  â”‚   Data Layer    â”‚ â”‚
â”‚  â”‚     Layer     â”‚â”€â”€â”‚     Logic     â”‚â”€â”€â”‚                 â”‚ â”‚
â”‚  â”‚   (UI/UX)     â”‚  â”‚    Layer      â”‚  â”‚  (Local/Remote) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                    â”‚           â”‚
â”‚         â”‚                   â”‚                    â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           Native Modules (iOS Bridge)                  â”‚ â”‚
â”‚  â”‚  - Location Service   - Camera Service                 â”‚ â”‚
â”‚  â”‚  - Notification       - Background Tasks               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS / WebSocket
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Firebase Backend                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Authenticationâ”‚  â”‚  Firestore   â”‚  â”‚ Cloud Functions  â”‚  â”‚
â”‚  â”‚  (ìµëª… ì¸ì¦)  â”‚  â”‚ (ì‹¤ì‹œê°„ DB)  â”‚  â”‚ (ì„œë²„ ë¡œì§)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     FCM      â”‚  â”‚  Analytics   â”‚  â”‚   App Check      â”‚  â”‚
â”‚  â”‚ (í‘¸ì‹œ ì•Œë¦¼)   â”‚  â”‚  (ë¶„ì„)      â”‚  â”‚  (ë³´ì•ˆ)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± ì•± ê³„ì¸µ êµ¬ì¡° (3-Tier Architecture)

### Layer 1: Presentation Layer (UI/UX)

**ì—­í• **: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë° ì‚¬ìš©ì ì¸í„°ë™ì…˜

```
src/
â”œâ”€â”€ screens/                    # í™”ë©´ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ onboarding/            # ì˜¨ë³´ë”© í”Œë¡œìš°
â”‚   â”‚   â”œâ”€â”€ WelcomeScreen.tsx
â”‚   â”‚   â”œâ”€â”€ LocationSetupScreen.tsx
â”‚   â”‚   â”œâ”€â”€ PermissionsScreen.tsx
â”‚   â”‚   â””â”€â”€ TestCheckInScreen.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ main/                  # ë©”ì¸ ì•± í™”ë©´
â”‚   â”‚   â”œâ”€â”€ HomeScreen.tsx
â”‚   â”‚   â”œâ”€â”€ CheckInScreen.tsx
â”‚   â”‚   â”œâ”€â”€ StatsScreen.tsx
â”‚   â”‚   â””â”€â”€ SettingsScreen.tsx
â”‚   â”‚
â”‚   â””â”€â”€ lock/                  # ê³„ì • ì ê¸ˆ
â”‚       â””â”€â”€ AccountLockedScreen.tsx
â”‚
â”œâ”€â”€ components/                 # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ ProgressBar.tsx
â”‚   â”‚   â””â”€â”€ Modal.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ checkin/
â”‚   â”‚   â”œâ”€â”€ CameraView.tsx
â”‚   â”‚   â”œâ”€â”€ CheckInGuide.tsx
â”‚   â”‚   â””â”€â”€ CheckInResult.tsx
â”‚   â”‚
â”‚   â””â”€â”€ stats/
â”‚       â”œâ”€â”€ StreakDisplay.tsx
â”‚       â”œâ”€â”€ BadgeCard.tsx
â”‚       â””â”€â”€ MonthlyChart.tsx
â”‚
â””â”€â”€ navigation/                 # ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡°
    â”œâ”€â”€ RootNavigator.tsx
    â”œâ”€â”€ OnboardingNavigator.tsx
    â””â”€â”€ MainNavigator.tsx
```

### Layer 2: Business Logic Layer

**ì—­í• **: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìƒíƒœ ê´€ë¦¬, ë°ì´í„° ì²˜ë¦¬

```
src/
â”œâ”€â”€ stores/                     # ìƒíƒœ ê´€ë¦¬ (Zustand)
â”‚   â”œâ”€â”€ authStore.ts           # ì¸ì¦ ìƒíƒœ
â”‚   â”œâ”€â”€ locationStore.ts       # ìœ„ì¹˜ ìƒíƒœ
â”‚   â”œâ”€â”€ checkInStore.ts        # ì²´í¬ì¸ ìƒíƒœ
â”‚   â”œâ”€â”€ timerStore.ts          # 45ë¶„ íƒ€ì´ë¨¸ ìƒíƒœ
â”‚   â””â”€â”€ statsStore.ts          # í†µê³„ ìƒíƒœ
â”‚
â”œâ”€â”€ services/                   # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ locationService.ts     # ìœ„ì¹˜ ì¶”ì  ë¡œì§
â”‚   â”œâ”€â”€ checkInService.ts      # ì²´í¬ì¸ ê²€ì¦ ë¡œì§
â”‚   â”œâ”€â”€ notificationService.ts # ì•Œë¦¼ ìŠ¤ì¼€ì¤„ë§
â”‚   â”œâ”€â”€ timerService.ts        # 45ë¶„ íƒ€ì´ë¨¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ lockService.ts         # ê³„ì • ì ê¸ˆ ë¡œì§
â”‚   â””â”€â”€ statsService.ts        # í†µê³„ ê³„ì‚°
â”‚
â”œâ”€â”€ hooks/                      # Custom React Hooks
â”‚   â”œâ”€â”€ useLocationTracking.ts
â”‚   â”œâ”€â”€ useCheckInTimer.ts
â”‚   â”œâ”€â”€ useNotifications.ts
â”‚   â””â”€â”€ useStats.ts
â”‚
â””â”€â”€ utils/                      # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
    â”œâ”€â”€ dateUtils.ts
    â”œâ”€â”€ locationUtils.ts
    â”œâ”€â”€ validationUtils.ts
    â””â”€â”€ constants.ts
```

### Layer 3: Data Layer

**ì—­í• **: ë°ì´í„° ì €ì¥, ë„¤íŠ¸ì›Œí¬ í†µì‹ , ë¡œì»¬ ìºì‹±

```
src/
â”œâ”€â”€ api/                        # Firebase API í†µì‹ 
â”‚   â”œâ”€â”€ firebase.ts            # Firebase ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ authApi.ts             # ì¸ì¦ API
â”‚   â”œâ”€â”€ firestoreApi.ts        # Firestore CRUD
â”‚   â”œâ”€â”€ functionsApi.ts        # Cloud Functions í˜¸ì¶œ
â”‚   â””â”€â”€ fcmApi.ts              # FCM í‘¸ì‹œ ì•Œë¦¼
â”‚
â”œâ”€â”€ models/                     # ë°ì´í„° ëª¨ë¸ (TypeScript íƒ€ì…)
â”‚   â”œâ”€â”€ User.ts
â”‚   â”œâ”€â”€ CheckIn.ts
â”‚   â”œâ”€â”€ Stats.ts
â”‚   â””â”€â”€ Notification.ts
â”‚
â””â”€â”€ storage/                    # ë¡œì»¬ ì €ì¥ì†Œ
    â”œâ”€â”€ asyncStorage.ts        # ë¹„ë™ê¸° ì €ì¥ì†Œ
    â””â”€â”€ secureStorage.ts       # ë³´ì•ˆ ì €ì¥ì†Œ
```

---

## ğŸ”„ í•µì‹¬ ë°ì´í„° íë¦„

### 1. ìœ„ì¹˜ ì¶”ì  ë° ì²´í¬ì¸ íŠ¸ë¦¬ê±°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Native Location Service (ë°±ê·¸ë¼ìš´ë“œ)                 â”‚
â”‚    - iOS Core Location (í•­ìƒ í—ˆìš©)                      â”‚
â”‚    - Geofencing: 37.2253811, 127.0706423 (ë°˜ê²½ 300m)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ ìœ„ì¹˜ ì´ë²¤íŠ¸
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Location Service (JS)                                â”‚
â”‚    - íšŒì‚¬ ë°˜ê²½ ì§„ì… ê°ì§€                                 â”‚
â”‚    - lastEnteredCompany íƒ€ì„ìŠ¤íƒ¬í”„ ì €ì¥                 â”‚
â”‚    - checkInDeadline = now + 45ë¶„ ê³„ì‚°                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ ì§„ì… ì´ë²¤íŠ¸
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Timer Service                                        â”‚
â”‚    - 45ë¶„ ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘                               â”‚
â”‚    - Firestoreì— deadline ì €ì¥                         â”‚
â”‚    - ë¡œì»¬ íƒ€ì´ë¨¸ + Cloud Functions ë°±ì—…                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ íƒ€ì´ë¨¸ ì‹œì‘
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Notification Service                                 â”‚
â”‚    - 0ë¶„: "ì…ë¬¸ ì „ ì²´í¬ í•„ìˆ˜" (ì¦‰ì‹œ)                    â”‚
â”‚    - 5ë¶„: "ì•„ì§ ì²´í¬ ì•ˆ í•¨" (5ë¶„ í›„ ìŠ¤ì¼€ì¤„)            â”‚
â”‚    - 15ë¶„: "ì•± ì‚¬ìš© ë¶ˆê°€ ê²½ê³ " (15ë¶„ í›„)               â”‚
â”‚    - 30ë¶„: "ë§ˆì§€ë§‰ ê²½ê³ " (30ë¶„ í›„)                     â”‚
â”‚    - 45ë¶„: íƒ€ì„ì•„ì›ƒ â†’ Lock Service í˜¸ì¶œ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ì¹´ë©”ë¼ ì²´í¬ì¸ í”„ë¡œì„¸ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User Action: "ì²´í¬í•˜ê¸°" ë²„íŠ¼ í´ë¦­                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Camera Service                                       â”‚
â”‚    - react-native-vision-camera ì´ˆê¸°í™”                 â”‚
â”‚    - í›„ë©´ ì¹´ë©”ë¼ í™œì„±í™”                                 â”‚
â”‚    - ì‹¤ì‹œê°„ í”„ë¦¬ë·° í‘œì‹œ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ ì¹´ë©”ë¼ í™”ë©´ í‘œì‹œ
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. User Verification                                    â”‚
â”‚    - ì‚¬ìš©ìê°€ ìœ¡ì•ˆìœ¼ë¡œ ìŠ¤í‹°ì»¤ í™•ì¸                      â”‚
â”‚    - "ìŠ¤í‹°ì»¤ ìˆìŒ" ë˜ëŠ” "ìŠ¤í‹°ì»¤ ì—†ìŒ" ì„ íƒ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ ì„ íƒ ì™„ë£Œ
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. CheckIn Service                                      â”‚
â”‚    - ì²´í¬ì¸ ê²°ê³¼ Firestoreì— ì €ì¥                      â”‚
â”‚    - checkedAt: í˜„ì¬ íƒ€ì„ìŠ¤íƒ¬í”„                        â”‚
â”‚    - hasSticker: true/false                            â”‚
â”‚    - íƒ€ì´ë¨¸ ì¤‘ì§€ ë° ì•Œë¦¼ ì·¨ì†Œ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ ì²´í¬ì¸ ì™„ë£Œ
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Stats Service                                        â”‚
â”‚    - currentStreak += 1 (ì—°ì† ê¸°ë¡ ì¦ê°€)               â”‚
â”‚    - totalCheckIns += 1                                â”‚
â”‚    - ë°°ì§€ íšë“ ì¡°ê±´ í™•ì¸                                â”‚
â”‚    - UI ì—…ë°ì´íŠ¸                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. 45ë¶„ íƒ€ì´ë¨¸ ë§Œë£Œ ë° ê³„ì • ì ê¸ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Timer Expiration (45ë¶„ ê²½ê³¼)                         â”‚
â”‚    - ë¡œì»¬ íƒ€ì´ë¨¸ ë§Œë£Œ ê°ì§€                              â”‚
â”‚    - Cloud Functionsë„ ë™ì‹œ ì²´í¬ (ë°±ì—…)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ íƒ€ì„ì•„ì›ƒ
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Lock Service                                         â”‚
â”‚    - accountStatus = 'locked' (Firestore ì—…ë°ì´íŠ¸)     â”‚
â”‚    - ë°ì´í„° ì‚­ì œ íŠ¸ë¦¬ê±°                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ ì ê¸ˆ ì‹¤í–‰
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Data Deletion (Cloud Functions)                      â”‚
â”‚    - checkIns ì»¬ë ‰ì…˜ ì „ì²´ ì‚­ì œ                         â”‚
â”‚    - stats ë¬¸ì„œ ì´ˆê¸°í™”                                  â”‚
â”‚    - ë¡œì»¬ AsyncStorage í´ë¦¬ì–´                          â”‚
â”‚    - ì ê¸ˆ í™”ë©´ìœ¼ë¡œ ê°•ì œ ì´ë™                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Firebase Firestore ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### Collection: `users`

```typescript
// users/{userId}
interface User {
  userId: string;                    // ìµëª… ì¸ì¦ UID
  companyLocation: {
    latitude: number;                // 37.2253811
    longitude: number;               // 127.0706423
    radius: number;                  // 300 (ë¯¸í„°)
  };
  accountStatus: 'active' | 'locked';
  createdAt: Timestamp;
  lastEnteredCompany: Timestamp | null;  // íšŒì‚¬ ì§„ì… ì‹œê°
  checkInDeadline: Timestamp | null;     // ì²´í¬ì¸ ë§ˆê° ì‹œê° (ì§„ì… + 45ë¶„)
}
```

### SubCollection: `users/{userId}/checkIns`

```typescript
// users/{userId}/checkIns/{date}
interface CheckIn {
  date: string;                      // 'YYYY-MM-DD' í˜•ì‹
  checkedAt: Timestamp | null;       // ì²´í¬ì¸ ì™„ë£Œ ì‹œê°
  hasSticker: boolean;               // ìŠ¤í‹°ì»¤ ë¶€ì°© ì—¬ë¶€
  enteredAt: Timestamp;              // íšŒì‚¬ ì§„ì… ì‹œê°
}
```

### SubCollection: `users/{userId}/stats`

```typescript
// users/{userId}/stats/current
interface Stats {
  currentStreak: number;             // í˜„ì¬ ì—°ì† ê¸°ë¡
  longestStreak: number;             // ìµœì¥ ì—°ì† ê¸°ë¡
  totalCheckIns: number;             // ì´ ì²´í¬ì¸ íšŸìˆ˜
  perfectWeeks: number;              // ì™„ë²½í•œ ì£¼ (5ì¼ ì—°ì†)
  badges: string[];                  // íšë“í•œ ë°°ì§€ ëª©ë¡
  monthlyStats: {
    [yearMonth: string]: {           // '2025-11'
      checkInDays: number;
      achievementRate: number;       // ë‹¬ì„±ë¥  (%)
    }
  };
}
```

---

## âš™ï¸ Cloud Functions ì„¤ê³„

### Function 1: `checkTimerExpiration`

**íŠ¸ë¦¬ê±°**: Scheduled (1ë¶„ ê°„ê²©)

**ì—­í• **: 45ë¶„ íƒ€ì´ë¨¸ ë§Œë£Œ í™•ì¸ ë° ê³„ì • ì ê¸ˆ

```typescript
// functions/src/checkTimerExpiration.ts
export const checkTimerExpiration = functions
  .pubsub
  .schedule('every 1 minutes')
  .onRun(async (context) => {
    const now = admin.firestore.Timestamp.now();

    // ë§ˆê° ì‹œê°„ì´ ì§€ë‚œ ì‚¬ìš©ì ì¡°íšŒ
    const expiredUsers = await admin.firestore()
      .collection('users')
      .where('accountStatus', '==', 'active')
      .where('checkInDeadline', '<=', now)
      .get();

    // ê° ì‚¬ìš©ìì— ëŒ€í•´ ì ê¸ˆ ì²˜ë¦¬
    const batch = admin.firestore().batch();
    expiredUsers.forEach(doc => {
      batch.update(doc.ref, {
        accountStatus: 'locked',
        lockedAt: now,
      });
    });

    await batch.commit();

    // ë°ì´í„° ì‚­ì œ íŠ¸ë¦¬ê±°
    expiredUsers.forEach(async (doc) => {
      await deleteUserData(doc.id);
    });
  });
```

### Function 2: `deleteUserData`

**íŠ¸ë¦¬ê±°**: Manual Call

**ì—­í• **: ê³„ì • ì ê¸ˆ ì‹œ ëª¨ë“  ë°ì´í„° ì‚­ì œ

```typescript
async function deleteUserData(userId: string) {
  const batch = admin.firestore().batch();

  // checkIns ì„œë¸Œì»¬ë ‰ì…˜ ì‚­ì œ
  const checkIns = await admin.firestore()
    .collection(`users/${userId}/checkIns`)
    .get();

  checkIns.forEach(doc => batch.delete(doc.ref));

  // stats ì´ˆê¸°í™”
  const statsRef = admin.firestore()
    .doc(`users/${userId}/stats/current`);

  batch.set(statsRef, {
    currentStreak: 0,
    longestStreak: 0,
    totalCheckIns: 0,
    perfectWeeks: 0,
    badges: [],
    monthlyStats: {},
  });

  await batch.commit();
}
```

### Function 3: `onCheckInComplete`

**íŠ¸ë¦¬ê±°**: Firestore Write (checkIns ì»¬ë ‰ì…˜)

**ì—­í• **: ì²´í¬ì¸ ì™„ë£Œ ì‹œ í†µê³„ ì—…ë°ì´íŠ¸

```typescript
export const onCheckInComplete = functions
  .firestore
  .document('users/{userId}/checkIns/{date}')
  .onWrite(async (change, context) => {
    const { userId } = context.params;

    // ì²´í¬ì¸ ì™„ë£Œ í™•ì¸
    const afterData = change.after.data();
    if (!afterData?.checkedAt) return;

    // í†µê³„ ì—…ë°ì´íŠ¸
    await updateStats(userId);

    // íƒ€ì´ë¨¸ ë° ì•Œë¦¼ ì·¨ì†Œ
    await cancelTimer(userId);
  });
```

---

## ğŸ“¡ ë„¤íŠ¸ì›Œí¬ ë° í†µì‹  êµ¬ì¡°

### REST API (Firebase Functions)

```
POST /api/auth/anonymous          # ìµëª… ì¸ì¦
GET  /api/user/{userId}           # ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
PUT  /api/user/{userId}/location  # íšŒì‚¬ ìœ„ì¹˜ ì„¤ì •

POST /api/checkin                 # ì²´í¬ì¸ ìƒì„±
GET  /api/checkin/today           # ì˜¤ëŠ˜ ì²´í¬ì¸ ì¡°íšŒ

GET  /api/stats                   # í†µê³„ ì¡°íšŒ
GET  /api/stats/badges            # ë°°ì§€ ëª©ë¡ ì¡°íšŒ
```

### WebSocket (Firestore Realtime)

```typescript
// ì‹¤ì‹œê°„ íƒ€ì´ë¨¸ ë™ê¸°í™”
firestore()
  .collection('users')
  .doc(userId)
  .onSnapshot(snapshot => {
    const checkInDeadline = snapshot.data()?.checkInDeadline;
    // íƒ€ì´ë¨¸ UI ì—…ë°ì´íŠ¸
  });

// ì‹¤ì‹œê°„ ê³„ì • ìƒíƒœ ê°ì‹œ
firestore()
  .collection('users')
  .doc(userId)
  .onSnapshot(snapshot => {
    const accountStatus = snapshot.data()?.accountStatus;
    if (accountStatus === 'locked') {
      // ì ê¸ˆ í™”ë©´ìœ¼ë¡œ ê°•ì œ ì´ë™
      navigation.replace('AccountLocked');
    }
  });
```

---

## ğŸ”” ì•Œë¦¼ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### Local Notifications (@notifee/react-native)

```typescript
// ì•Œë¦¼ ìŠ¤ì¼€ì¤„ë§ ì „ëµ
const scheduleNotifications = (enteredAt: Date) => {
  const notifications = [
    { delay: 0,     title: 'ğŸ’š ì…ë¬¸ ì „ ì²´í¬ í•„ìˆ˜!', priority: 'default' },
    { delay: 5,     title: 'âš ï¸ ì•„ì§ ì²´í¬ ì•ˆ í•¨', priority: 'high' },
    { delay: 15,    title: 'ğŸš¨ ì•± ì‚¬ìš© ë¶ˆê°€ ê²½ê³ ', priority: 'high' },
    { delay: 30,    title: 'â— ë§ˆì§€ë§‰ ê²½ê³ ', priority: 'max' },
  ];

  notifications.forEach(notif => {
    notifee.createTriggerNotification(
      {
        title: notif.title,
        body: `${45 - notif.delay}ë¶„ ë‚¨ì•˜ìŠµë‹ˆë‹¤`,
        android: {
          channelId: 'urgent',
          importance: AndroidImportance.HIGH,
        },
        ios: {
          sound: 'urgent.wav',
          criticalVolume: 1.0,
        },
      },
      {
        type: TriggerType.TIMESTAMP,
        timestamp: enteredAt.getTime() + (notif.delay * 60 * 1000),
      }
    );
  });
};
```

---

## ğŸ”’ ë³´ì•ˆ ì•„í‚¤í…ì²˜

### 1. ìµëª… ì¸ì¦ í”Œë¡œìš°

```
ì•± ìµœì´ˆ ì‹¤í–‰
  â†’ Firebase Anonymous Auth
  â†’ ë””ë°”ì´ìŠ¤ë³„ ê³ ìœ  UID ìƒì„±
  â†’ Firestoreì— ì‚¬ìš©ì ë¬¸ì„œ ìƒì„±
  â†’ ë¡œì»¬ì— UID ì €ì¥ (AsyncStorage)
```

### 2. Firestore Security Rules

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // users ì»¬ë ‰ì…˜
    match /users/{userId} {
      // ìì‹ ì˜ ë¬¸ì„œë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
      allow read, write: if request.auth.uid == userId;

      // checkIns ì„œë¸Œì»¬ë ‰ì…˜
      match /checkIns/{date} {
        allow read, write: if request.auth.uid == userId;
      }

      // stats ì„œë¸Œì»¬ë ‰ì…˜
      match /stats/{document=**} {
        allow read, write: if request.auth.uid == userId;
      }
    }
  }
}
```

### 3. ë°ì´í„° ì•”í˜¸í™”

```typescript
// AsyncStorageì— ì €ì¥ë˜ëŠ” ë¯¼ê° ë°ì´í„°ëŠ” ì•”í˜¸í™”
import EncryptedStorage from 'react-native-encrypted-storage';

// ì‚¬ìš©ì UID ì•”í˜¸í™” ì €ì¥
await EncryptedStorage.setItem('user_uid', userId);

// íšŒì‚¬ ìœ„ì¹˜ ì•”í˜¸í™” ì €ì¥
await EncryptedStorage.setItem('company_location', JSON.stringify({
  latitude: 37.2253811,
  longitude: 127.0706423,
}));
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™” ì „ëµ

### 1. ë°°í„°ë¦¬ ìµœì í™”

```typescript
// Geofencing ì‚¬ìš©ìœ¼ë¡œ ë°°í„°ë¦¬ ì ˆì•½
const geofence = {
  identifier: 'company',
  latitude: 37.2253811,
  longitude: 127.0706423,
  radius: 300,
  notifyOnEntry: true,
  notifyOnExit: true,
};

// GPS ì—…ë°ì´íŠ¸ ì£¼ê¸° ìµœì†Œí™”
const locationConfig = {
  distanceFilter: 50,           // 50m ì´ë™ ì‹œì—ë§Œ ì—…ë°ì´íŠ¸
  desiredAccuracy: 'balanced',  // ë°°í„°ë¦¬ì™€ ì •í™•ë„ ê· í˜•
  interval: 900000,             // 15ë¶„ ê°„ê²© (ë°€ë¦¬ì´ˆ)
};
```

### 2. ë©”ëª¨ë¦¬ ìµœì í™”

```typescript
// ì´ë¯¸ì§€ ìµœì í™”
import FastImage from 'react-native-fast-image';

// ìºì‹± ì „ëµ
const imageCache = FastImage.preload([
  { uri: 'sticker_icon.png' },
  { uri: 'badge_7days.png' },
]);

// ë¦¬ìŠ¤íŠ¸ ê°€ìƒí™” (í†µê³„ í™”ë©´)
import { FlashList } from '@shopify/flash-list';

<FlashList
  data={checkInHistory}
  estimatedItemSize={80}
  renderItem={renderCheckInItem}
/>
```

### 3. ë„¤íŠ¸ì›Œí¬ ìµœì í™”

```typescript
// Firestore ì˜¤í”„ë¼ì¸ ì§€ì†ì„±
firestore().settings({
  persistence: true,
  cacheSizeBytes: 40 * 1024 * 1024, // 40MB ìºì‹œ
});

// ì¿¼ë¦¬ ìµœì í™” (ì¸ë±ìŠ¤ ì‚¬ìš©)
firestore()
  .collection('users')
  .doc(userId)
  .collection('checkIns')
  .orderBy('date', 'desc')
  .limit(30); // ìµœê·¼ 30ì¼ë§Œ ì¡°íšŒ
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### 1. Unit Tests (Jest)

```typescript
// íƒ€ì´ë¨¸ ë¡œì§ í…ŒìŠ¤íŠ¸
describe('TimerService', () => {
  it('should calculate deadline correctly', () => {
    const enteredAt = new Date('2025-11-02T09:00:00');
    const deadline = calculateDeadline(enteredAt);
    expect(deadline).toEqual(new Date('2025-11-02T09:45:00'));
  });
});

// ìœ„ì¹˜ ê±°ë¦¬ ê³„ì‚° í…ŒìŠ¤íŠ¸
describe('LocationUtils', () => {
  it('should detect within 300m radius', () => {
    const companyLocation = { lat: 37.2253811, lng: 127.0706423 };
    const userLocation = { lat: 37.2255000, lng: 127.0708000 };
    const distance = calculateDistance(companyLocation, userLocation);
    expect(distance).toBeLessThan(300);
  });
});
```

### 2. Integration Tests

```typescript
// ì²´í¬ì¸ í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸
describe('CheckIn Flow', () => {
  it('should complete check-in successfully', async () => {
    // 1. íšŒì‚¬ ì§„ì…
    await locationService.enterCompany();

    // 2. íƒ€ì´ë¨¸ ì‹œì‘ í™•ì¸
    const timer = timerStore.getState().activeTimer;
    expect(timer).toBeDefined();

    // 3. ì²´í¬ì¸ ìˆ˜í–‰
    await checkInService.completeCheckIn(true);

    // 4. í†µê³„ ì—…ë°ì´íŠ¸ í™•ì¸
    const stats = await statsService.getStats();
    expect(stats.currentStreak).toBe(1);
  });
});
```

### 3. E2E Tests (Detox)

```typescript
// ì „ì²´ í”Œë¡œìš° E2E í…ŒìŠ¤íŠ¸
describe('Complete User Journey', () => {
  it('should complete onboarding and first check-in', async () => {
    // ì˜¨ë³´ë”©
    await element(by.id('welcome-start-btn')).tap();
    await element(by.id('location-current-btn')).tap();
    await element(by.id('permissions-allow-btn')).tap();

    // ì²« ì²´í¬ì¸
    await element(by.id('test-checkin-btn')).tap();
    await element(by.id('camera-open-btn')).tap();
    await element(by.id('sticker-yes-btn')).tap();

    // ê²°ê³¼ í™•ì¸
    await expect(element(by.text('ì²´í¬ ì™„ë£Œ!'))).toBeVisible();
  });
});
```

---

## ğŸš€ ë°°í¬ íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Development (ë¡œì»¬)                               â”‚
â”‚     - ì½”ë“œ ì‘ì„± ë° ë¡œì»¬ í…ŒìŠ¤íŠ¸                       â”‚
â”‚     - Firebase Emulator ì‚¬ìš©                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ git push
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. CI/CD (GitHub Actions)                          â”‚
â”‚     - ìë™ ë¹Œë“œ                                      â”‚
â”‚     - Unit Tests ì‹¤í–‰                               â”‚
â”‚     - Integration Tests ì‹¤í–‰                        â”‚
â”‚     - E2E Tests ì‹¤í–‰ (Detox)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ tests pass
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Staging (TestFlight)                            â”‚
â”‚     - ë‚´ë¶€ í…ŒìŠ¤í„° ë°°í¬                               â”‚
â”‚     - ë² íƒ€ í…ŒìŠ¤íŠ¸ (50ëª…)                            â”‚
â”‚     - í”¼ë“œë°± ìˆ˜ì§‘                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ approval
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Production (App Store)                          â”‚
â”‚     - ì •ì‹ ì¶œì‹œ                                      â”‚
â”‚     - ëª¨ë‹ˆí„°ë§ (Firebase Analytics)                 â”‚
â”‚     - í¬ë˜ì‹œ ë¦¬í¬íŒ… (Crashlytics)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ë° ê´€ì°°ì„±

### 1. Firebase Analytics

```typescript
// ì£¼ìš” ì´ë²¤íŠ¸ ì¶”ì 
analytics().logEvent('company_entered', {
  timestamp: Date.now(),
  location: 'company_hq',
});

analytics().logEvent('checkin_completed', {
  streak: currentStreak,
  duration: checkInDuration,
});

analytics().logEvent('account_locked', {
  reason: 'timer_expired',
  streak_lost: streakLost,
});
```

### 2. Crashlytics

```typescript
// í¬ë˜ì‹œ ë¦¬í¬íŒ…
crashlytics().log('Timer expired, attempting lock');
crashlytics().recordError(error);

// ì»¤ìŠ¤í…€ í‚¤ ì„¤ì •
crashlytics().setUserId(userId);
crashlytics().setAttribute('streak', String(currentStreak));
```

### 3. Performance Monitoring

```typescript
// ì„±ëŠ¥ ì¶”ì 
const trace = perf().startTrace('checkin_flow');
await checkInService.completeCheckIn();
await trace.stop();

// ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì¶”ì 
perf().setPerformanceCollectionEnabled(true);
```

---

## ğŸ”„ ì‹œìŠ¤í…œ íë¦„ë„ ìš”ì•½

```
ì•± ì‹¤í–‰
  â†“
ì˜¨ë³´ë”© (ìµœì´ˆ 1íšŒ)
  â†“
í™ˆ í™”ë©´ (ëŒ€ê¸° ìƒíƒœ)
  â†“
[ë°±ê·¸ë¼ìš´ë“œ] ìœ„ì¹˜ ì¶”ì 
  â†“
íšŒì‚¬ 300m ì§„ì… ê°ì§€
  â†“
45ë¶„ íƒ€ì´ë¨¸ ì‹œì‘
  â†“
ì•Œë¦¼ ë°œì†¡ (0, 5, 15, 30ë¶„)
  â†“
ì‚¬ìš©ì ì²´í¬ì¸ ìˆ˜í–‰
  â”œâ”€ ì™„ë£Œ â†’ í†µê³„ ì—…ë°ì´íŠ¸ â†’ í™ˆ í™”ë©´
  â””â”€ ë¯¸ì™„ë£Œ â†’ 45ë¶„ ê²½ê³¼ â†’ ê³„ì • ì ê¸ˆ â†’ ì ê¸ˆ í™”ë©´
```

---

## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ ìµœì¢… ê²°ì •

| ë ˆì´ì–´ | ê¸°ìˆ  | ë²„ì „ | ì„ ì • ì´ìœ  |
|--------|------|------|----------|
| **Frontend Framework** | React Native | 0.74.0 | iOS ê°œë°œ ì†ë„, Firebase ì—°ë™ ìš©ì´ |
| **Language** | TypeScript | 5.3.0 | íƒ€ì… ì•ˆì •ì„±, ê°œë°œ ìƒì‚°ì„± |
| **State Management** | Zustand | 4.5.0 | ê°€ë²¼ì›€, ê°„ë‹¨í•œ API |
| **Navigation** | React Navigation | 6.x | í‘œì¤€, ì»¤ë®¤ë‹ˆí‹° ì§€ì› |
| **Backend** | Firebase | - | ë¹ ë¥¸ êµ¬ì¶•, ì‹¤ì‹œê°„ DB, ë¬´ë£Œ ì‹œì‘ |
| **Location** | react-native-geolocation-service | 5.3.1 | ì•ˆì •ì , iOS ìµœì í™” |
| **Camera** | react-native-vision-camera | 3.8.0 | ìµœì‹ , ì„±ëŠ¥ ìš°ìˆ˜ |
| **Notifications** | @notifee/react-native | 7.8.2 | ê°€ì¥ ê°•ë ¥í•œ ë¡œì»¬ ì•Œë¦¼ |
| **Storage** | @react-native-async-storage | 1.21.0 | í‘œì¤€ ë¹„ë™ê¸° ì €ì¥ì†Œ |
| **Secure Storage** | react-native-encrypted-storage | 4.0.3 | ë¯¼ê° ë°ì´í„° ì•”í˜¸í™” |
| **Testing** | Jest + Detox | - | ë‹¨ìœ„/í†µí•©/E2E í…ŒìŠ¤íŠ¸ |

---

**ë¬¸ì„œ ì‘ì„± ì™„ë£Œ**
